## Chapter 13 단순 정렬 알고리즘

### 13.1 쉘 소트의 기본 원리
* 삽입소트를 변형한 알고리즘
* O(n<sup>1.25</sup>)~O(n<sup>1.5</sup>) 의 복잡도

* 삽입 소트
    * 인접한 요소를 비교하여 만약 필요하다면 교환
    * 불규칙하게 늘어서 있는 데이터보다 이미 정렬되어있는 데이터를 이용할 때 효율적

* 쉘 소트의 기본 개념
    * 사전 처리를 통해 미리 정렬이 완료된 상태와 가깝게 두면,  
      사전 처리에 걸리는 시간을 계산에 넣어도 전체적으로 보면 낮은 복잡도로 정렬할 수 있다.

* h-소트(h-sort)
    * h만큼 떨어진 요소를 정렬하는 처리

### 13.2 쉘 소트의 복잡도
* 의문?
    * 한 번만 정렬(1-소트)하면 될 것을 그전에 4-소트, 2-소트 두번이나 여분의 작업을 하게 되면 오히려 시간이 더 걸리지 않을까?
    * 삽입소트 O(n<sup>2</sup>) 의 복잡도에 비에 낮다는 것을 증명할 필요가 있으나,  
      쉘소트의 수학적 해석이 매우 어려운 문제이기 때문에 저자님은 직관적으로 설명하심.

* 극단적인 예시
    * 10,000 개의 요소를 가지는 배열을 5000-소트하는 경우
        * 2개의 요소로 이루어진 5000쌍의 데이터를 정렬하는 것과 같음
        * 요소의 개수를 i 라고 할 때의 복잡도
            * O(i<sup>2</sup>)
        * 5000-소트를 하는데 필요한 복잡도 (n은 총 요소수 10,000을 의미)
            * n/2 * O(i<sup>2</sup>) = O(n) * O(i<sup>2</sup>) 
            * n이 i보다 훨씬 크기 때문에, O(i<sup>2</sup>) 을 정수로 볼 수 있음
            * 5000-소트의 복잡도는 O(n)이 될 수 있음.
    * 10,000개의 요소를 2-소트 하는 경우
        * 요소가 불규칙하다면... 아래와 같으나
            * O((n/2)<sup>2</sup>) = O(n<sup>2</sup>)
        * 상단 부분 정렬이 완료된 상태라면 이보다 더 낮을 수 있음
    
* 셀소트는 개별적인 h-소트가 O(n<sup>2</sup>)보다 작은 오더로 실행가능하기 때문에  
여러 번 정렬함에도 불고하고 전체 처리에 걸리는 시간은 삽입소트를 직접사용할 때보닥 적게됨.

  
### 13.3 증분 선택
* 멱승(冪乘)
    * 어떤 수 또는 식 a에서 그 거듭제곱을 구하는 계산법.

* h 소트의 성질
    * 정수 x > y이면 x-소트를 한후에 y-소트를 하면 그 결과는 x-소트 완료, y-소트 완료 양쪽 성질을 만족한다.
    * x,y가 배수관계가 아니여도 됨.
    
* 쉘소트란 감소하는 아래 수열에 따라 h-소트 하는 방법
    * h = h<sub>1</sub>, h<sub>2</sub>, ... , h<sub>t-1</sub>, h<sub>t</sub>  
      (단 h<sub>t</sub> = 1)
    * 쉘소트를 감소하는 증분에 의한 소트라고도 함. (diminishing increment sort)

#### 수열의 선택
* `수열에 나타나는 값은 서로 배수가 되지 않는 편이 좋은 결과를 얻을 수 있다.`
* 배수가 될 경우 홀수번째 요소끼리, 짝수번째 요소끼리 비교 교환이 이루어짐.
* 거의 배수가 되지 않는 수열을 사용하면 요소를 섞어가며 h-소트가 이루어지므로 쉘 소트의 복잡도가 낮아짐.

* Knuth 의 해석 실험의 결과를 바탕으로 좋은 성능으로 사용될 수 있는 수열
    * h = ..., 121, 40, 13 , 4, 1 ... (A)
    * 3배한뒤 1을 더함.
        * h = s * 3 + 1  (s >= 0)  의 역순
    * 복잡도는 O(n<sup>1.25</sup>)

* h<sub>s</sub> = 2<sup>s</sup> - 1 의 역순
    * h = ..., 15, 7, 3, 1

* 안정성
    * h-소트에 의해 멀리 떨어진 요소를 정렬할 때에 같은 키를 가진 요소의 위치 관계가 사라져 버리기 때문에, 안정적이지 않음. 

    
### 13.4 쉘 소트 프로그램
* `n을 넘지 않는` 이 아니라 `n/9`를 넘지 않는 으로 한 것
    * 멀리 떨어진 요소를 h-소트 해봐야 별다른 이득이 없고 시간만 더 걸리기 때문.
* ShellSort 클래스 참조
