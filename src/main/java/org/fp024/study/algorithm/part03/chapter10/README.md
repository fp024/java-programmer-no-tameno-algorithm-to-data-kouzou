## Chapter 10 균형 트리

### 10.1 균형 트리란?
#### 이진 트리의 단점
* 데이터의 삽입/삭제하는 순서에 따라서 트리의 밸런스가 나빠질 수 있음.
    * 최악의 경우 O(n)

#### 단점을 해결한 균형 트리
* 트리를 사용한 탐색 알고리즘은 루트에서 리프를 향해 트리를 방문하면서, 방문하는 각노드에 대해 어떤 판단이나 처리를 하는 구조로 되어있음.
    * 트리의 높이를 가능한 낮게 유지하면 성능을 향상 시킬 수 있음.
    * 그러나, 트리의 형태를 고치는 복잡도가 O(log n)보다 크다면 의미 없음.
  * 균형 트리(balanced tree)
    * 삽입, 삭제 할때 마다 모양을 변형시켜 높이가 log<sub>2</sub>n 이내가 되도록 하는 트리


### 10.2 AVL 트리
* 저자님께서 AVL 트리관련해서는 별도 구현없이 설명만 하셨다.
#### 10.2.1 AVL 트리의 기본 개념
* 최악의 경우라도 탐색, 삽입, 삭제 모든 조작을 O(log n)에 실행하다는 것을 증명한 트리
* 근래는 B 트리와 같은 보다 성능이 뛰어난 균형트리가 개발되어 AVL 트리의 실용적 가치는 없음

* 제약조건  
`모든 노드에 대해 왼쪽 서브트리와 오른쪽 서브 트리의 높이차가 1이내가 되도록 해야한다.`

#### 10.2.2 AVL 트리의 조작
* 원래 상태
```
                   30
                /      \
              15         39
             /   \      /  \ 
           10      18  34   50   
          /  \    /  \
         5   12  16  25
```


* 회전
    * 1을 추가
    ```
                   30(A)
                /         \
              15(B)       39(Z)
             /   \        /  \ 
           10(X)  18(Y)  34   50   
           /  \    /  \
          5   12  16  25
        /
       1
    ```
    * 회전
    ```
                   15(B)
                /        \
              10(X)       30(A)
             /   \       /      \ 
            5    12    18(Y)    39(Z)   
          /           /  \     /    \   
         1           16  25   34    50
    ```


* 이중회전
    * 28을 추가
    ```
                    30(A)
                 /        \
              15(B)         39
             /    \        /  \ 
           10     18(C)  34    50   
          /  \    /  \
         5   12  16  25
                       \ 
                        28 
    ```
    * 이중 회전
    ```
                     18(C)
                  /        \
              15(B)         30(A)
             /    \         /  \ 
           10     16      25    34   
          /  \             \     \
         5   12            27    50
                       
                      
    ```


* TODO: AVL 트리관련해서는 다른 책의 구현 설명을 따라해봐야겠다. 

### 10.3 B 트리
#### 10.3.1 B 트리의 기본 개념 
* m진 트리를 사용 (m>=2)

* m진 트리 중, 다음 조건을 만족하는 것을 m단 B 트리라고 부름.
    * 조건(1): 루트는 리프이던지 또는 2 ~ m개의 자식을 가진다.
    * 조건(2): 루트, 리프 이외의 노드는[m/2] ~ m개의 자식을 가진다.  
      [x]는 x보다 크거나 같은 최소의 정수 (올림처리)
    * 조건(3): 루트로부터 모든 리프까지의 경로 길이는 같다.

* 이진 탐색트리는 모든 노드가 데이터(요소)를 가지지만, B 트리는 리프만 데이터를 가질 수 있다. 

#### 10.3.2 B 트리의 조작
* 책의 그림 도식도 보고 동작 이해는 했음..
* 그런데.. Fig. 10.7의 (c)의 도식도에서 C<sub>1</sub> 내부 노드의 그림이 잘못된 것 같음.    
  `18, 21 순으로 채워져 있는데, 15, 18 순이 되야할 것 같다.`
  

#### 10.3.3 B 트리 프로그램
* BTree 클래스 참조
    * 저자님 구현 예제 코드를 보니 Test 코드 제외하고 600줄이 넘는다.
    * 여기선 코드가 복잡하니 제네릭을 미리 적용하진 말자!
    * Test 코드 부분은 표준입력을 받아서 계산기처럼 처리하셨는데,  
      이부분은 JUnit에서 메서드 테스트 하듯이 별도로 하면 될 것 같다.


#### 10.3.4 B* 트리
* 단수가 높은 B 트리는 외부 기억 장치에서 탐색 실행시 뛰어난 성능을 발휘함.
* B 트리의 결점 
    * 내부 노드의 자식 수가 최소 `[m/2]`개가 되어야하여 최악의 경우, 기억 영역의 절반정도가 쓸모없게 된다는점.
* B* 트리는 노드의 자식수를 `[2m/3]` 개 이상 m개 이하로 하여 B 트리의 결점 완화


